<div class="dashboard-container">
  <h1>Welcome Dashboard</h1>

  <!-- Horizontal Widgets Container -->
  <div class="widgets-container">
    <!-- Widget 1: Table View - Latest 5 Books -->
    <div class="widget table-widget">
      <h2>Latest 5 Books Added</h2>
      <div class="table-container">
        <table class="books-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Author</th>
              <th>ISBN</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let book of latestBooks">
              <td>{{ book.id }}</td>
              <td>{{ book.title }}</td>
              <td>{{ book.author }}</td>
              <td>{{ book.isbn }}</td>
            </tr>
            <tr *ngIf="latestBooks.length === 0">
              <td colspan="4" class="no-data">No books available</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Widget 2: List View - Oldest 10 Books -->
    <div class="widget list-widget">
      <h2>Oldest 10 Books by Publication Date</h2>
      <div class="list-container">
        <div class="book-item" *ngFor="let book of oldestBooks">
          <div class="book-info">
            <span class="book-id">ID: {{ book.id }}</span>
            <span class="book-title">{{ book.title }}</span>
            <span class="book-isbn">ISBN: {{ book.isbn }}</span>
            <span class="book-date"
              >Published: {{ book.publicationDate | date }}</span
            >
          </div>
        </div>
        <div *ngIf="oldestBooks.length === 0" class="no-data">
          No books available
        </div>
      </div>
    </div>

    <!-- Widget 3: Donut Chart - Books by Author -->
    <div class="widget chart-widget">
      <h2>Books by Author</h2>
      <div class="chart-container">
        <div class="chart-wrapper">
          <canvas #authorChart width="250" height="250"></canvas>
        </div>
        <div class="chart-legend" *ngIf="authorBookCounts.length > 0">
          <div
            class="legend-item"
            *ngFor="let item of authorBookCounts; let i = index"
          >
            <span
              class="legend-color"
              [style.background-color]="getChartColor(i)"
            ></span>
            <span class="legend-text"
              >{{ item.author }}: {{ item.bookCount }}</span
            >
          </div>
        </div>
        <div *ngIf="authorBookCounts.length === 0" class="no-data">
          No books available for chart
        </div>
      </div>
    </div>
  </div>
</div>
